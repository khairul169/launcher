export const launcherItems: LauncherItem[] = [
  {
    name: "Facebook",
    href: "https://www.facebook.com/",
    icon: "https://raw.githubusercontent.com/walkxcode/dashboard-icons/07a06d893e901fda965ba10f39d7aa7a3a18ea0d/svg/facebook.svg",
  },
  {
    name: "YouTube",
    href: "https://www.youtube.com/",
    icon: "https://raw.githubusercontent.com/edent/SuperTinyIcons/d2d4dadd66db9b3ff0cd9297e2c77f44c0e0808e/images/svg/youtube.svg ",
  },
  // {
  //   name: "Excalidraw",
  //   href: "https://draw.rul.sh",
  //   icon: "https://excalidraw.com/apple-touch-icon.png",
  // },
  {
    name: "Eraser",
    href: "https://app.eraser.io/auth/sign-in",
    icon: "https://app.eraser.io/favicon.svg",
  },
  {
    name: "WhatsApp Web",
    href: "https://web.whatsapp.com/",
    icon: "https://raw.githubusercontent.com/edent/SuperTinyIcons/d2d4dadd66db9b3ff0cd9297e2c77f44c0e0808e/images/svg/whatsapp.svg",
  },
  {
    name: "Jellyfin",
    href: "http://10.0.0.101:8096/web",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/jellyfin.svg",
    pinned: true,
  },
  {
    name: "Komga",
    href: "http://10.0.0.101:25600",
    icon: "https://raw.githubusercontent.com/homarr-labs/dashboard-icons/a0aeb14f4bd3e4c56b0858cc6554d9246b28d7a8/svg/komga.svg",
    pinned: false,
  },
  // {
  //   name: "Music",
  //   href: "http://armbian:8096/web",
  //   icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/jellyfin.svg",
  // },
  {
    name: "Youtube2MP3",
    href: "http://yt2mp3.home.ip",
    icon: "https://git.rul.sh/khairul169/Go-YT2MP3/raw/branch/main/ui/public/android-chrome-512x512.png",
  },
  {
    name: "Memos",
    href: "https://memos.rul.sh",
    icon: "https://memos.rul.sh/apple-touch-icon.png",
    pinned: true,
  },
  // {
  //   name: "Flatnotes",
  //   href: "http://100.64.0.3:8124",
  //   icon: "https://raw.githubusercontent.com/dullage/flatnotes/refs/heads/develop/client/public/android-chrome-192x192.png",
  // },
  {
    name: "Gitea",
    href: "https://git.rul.sh",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/gitea.svg",
  },
  {
    name: "Gotify",
    href: "https://gotify.rul.sh",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/gotify.svg",
  },
  // {
  //   name: "AriaNg",
  //   href: "http://ariang.home.ip/",
  //   icon: "https://raw.githubusercontent.com/mayswind/AriaNg/master/src/tileicon.png",
  //   disabled: true,
  // },
  {
    name: "NAS Files",
    href: "http://10.0.0.101:9005/files",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/filebrowser.svg",
    pinned: true,
  },
  {
    name: "Cloud Files",
    href: "https://fm.rul.sh",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/filebrowser.svg",
  },
  {
    name: "Change Detection",
    href: "https://chgdetect.rul.sh/",
    icon: "https://raw.githubusercontent.com/dgtlmoon/changedetection.io/master/changedetectionio/static/images/avatar-256x256.png",
    disabled: true,
  },
  {
    name: "Code Server",
    href: "https://code.rul.sh",
    icon: "https://raw.githubusercontent.com/edent/SuperTinyIcons/d2d4dadd66db9b3ff0cd9297e2c77f44c0e0808e/images/svg/visualstudiocode.svg",
    pinned: true,
  },
  {
    name: "Vaultwarden",
    href: "https://vw.rul.sh",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/vaultwarden.svg",
    pinned: true,
  },
  {
    name: "Garage WebUI",
    href: "http://srv:3909/buckets",
    icon: "https://garagehq.deuxfleurs.fr/icons/apple-touch-icon.png",
    disabled: false,
  },
  {
    name: "Pi-hole",
    href: "http://pi.hole/admin",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/pi-hole.svg",
  },
  // {
  //   name: "Headscale",
  //   href: "https://headscale.rul.sh/web/devices.html",
  //   icon: "https://raw.githubusercontent.com/juanfont/headscale/refs/heads/main/docs/logo/headscale3-dots.svg",
  // },
  {
    name: "Nginx Proxy Manager",
    href: "http://nginx-pm.home.ip/",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/nginx-proxy-manager.svg",
  },
  {
    name: "Nginx UI",
    href: "https://nginx-ui.rul.sh/",
    icon: "https://nginxui.com/assets/icon.svg",
  },
  {
    name: "pgAdmin",
    href: "http://pgadmin.home.ip/",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/pgadmin.svg",
  },
  {
    name: "phpMyAdmin",
    href: "http://pma.home.ip/",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/phpmyadmin.svg",
  },
  {
    name: "Duplicati",
    href: "https://duplicati.rul.sh/",
    icon: "https://duplicati.rul.sh/ngax/favicon/android-icon-192x192.png",
  },
  {
    name: "Mongo Express",
    href: "http://home:27018/",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/mongodb.svg",
    disabled: true,
  },
  {
    name: "Hoppscotch",
    href: "https://hopp.rul.sh/",
    icon: "https://github.com/walkxcode/dashboard-icons/raw/be82e22c418f5980ee2a13064d50f1483df39c8c/svg/hoppscotch.svg",
    disabled: true,
  },
  {
    name: "aaPanel",
    href: "https://10.0.0.102:29760/590d1b7a",
    icon: "https://www.aapanel.com/static/images/bt_logo.png",
    disabled: true,
  },
  {
    name: "ProxmoxVE",
    href: "https://pve.rul.sh/",
    icon: "https://www.proxmox.com/apple-touch-icon.png",
  },
  // {
  //   name: "LXConsole",
  //   href: "https://lxc.rul.sh/",
  //   icon: "https://github.com/PenningLabs/lxconsole/raw/refs/heads/main/lxconsole/static/assets/img/logo-light.svg",
  // },
  {
    name: "Incus UI",
    href: "https://srv:8443/",
    icon: "https://linuxcontainers.org/static/img/containers.small.png",
  },
  // {
  //   name: "Incus UI (Armbian)",
  //   href: "https://armbian:8443",
  //   icon: "https://linuxcontainers.org/static/img/containers.small.png",
  // },
];

type LauncherItem = {
  name: string;
  href: string;
  icon: string;
  disabled?: boolean;
  pinned?: boolean;
};

const openBtn = document.querySelector(".open-launcher") as HTMLButtonElement;
const launcher = document.querySelector(".launcher") as HTMLDivElement;
const title = launcher.querySelector(".title") as HTMLButtonElement;
const itemContainer = launcher.querySelector(".items") as HTMLDivElement;

let isLauncherOpen = false;
let startY = 0;

export const openLauncher = () => {
  launcher.classList.add("open");
  launcher.style.opacity = "1";
  isLauncherOpen = true;
};

export const closeLauncher = () => {
  launcher.classList.remove("open");
  launcher.style.opacity = "0";
  isLauncherOpen = false;
};

const onScroll = (deltaY: number) => {
  if (deltaY > 10 && !isLauncherOpen) {
    openLauncher();
    return;
  }

  const curScroll = launcher.scrollTop;
  if (deltaY < -50 && isLauncherOpen && curScroll <= 1) {
    closeLauncher();
    return;
  }
};

const onTouchStart = (e: TouchEvent) => {
  startY = e.touches[0].clientY;
};

const onTouchMove = (e: TouchEvent) => {
  const curY = e.touches[0].clientY;
  onScroll(startY - curY);
};

export const initLauncher = () => {
  itemContainer.innerHTML = launcherItems
    .filter((item) => item.disabled !== true)
    .map((item) => {
      return `
        <a href="${item.href}" class="item" rel="noopener noreferrer" title="${item.name}">
          <div class="image">
            <img src="${item.icon}" alt="${item.name}" />
          </div>
          <span class="title">${item.name}</span>
        </a>
      `;
    })
    .join("");

  title.addEventListener("click", closeLauncher);
  openBtn.addEventListener("click", openLauncher);
  document.addEventListener("wheel", (e) => onScroll(e.deltaY));
  document.addEventListener("touchstart", onTouchStart);
  document.addEventListener("touchmove", onTouchMove);

  launcher.addEventListener("click", (e) => {
    if (e.target === launcher) {
      closeLauncher();
    }
  });
};
